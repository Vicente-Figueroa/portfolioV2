<!-- Page content-->
<section class="py-5">
    <div class="container px-5">
        <!-- Chatbot form-->
        <div class="bg-light rounded-4 py-5 px-4 px-md-5">
            <div class="text-center mb-5 tittle">
                <div class="feature bg-primary bg-gradient-primary-to-secondary text-white rounded-3 mb-3">
                    <i class="bi bi-chat-dots"></i>
                </div>
                <h1 class="fw-bolder">Proto-Chatbot E-commerce</h1>
                <p class="lead fw-normal text-muted mb-0">Reconocimiento de intención y productos</p>
            </div>

            <!-- Chatbot description -->
            <div class="alert alert-info mb-4" role="alert">
                <h4 class="alert-heading">Bienvenido a nuestro Proto-Chatbot de E-commerce</h4>
                <p>Este es un prototipo de chatbot diseñado para reconocer la intención de tus preguntas y los productos mencionados en el contexto de una tienda de tecnología online. A diferencia de un chatbot con IA avanzada, este Proto-Chatbot no proporciona respuestas elaboradas, sino que muestra la intención detectada y los productos identificados en tu consulta.</p>
                <hr>
                <p class="mb-0">Ejemplos de preguntas que puedes hacer:</p>
                <ul>
                    <li>¿Tienen el iPhone 15 disponible?</li>
                    <li>Busco información sobre los AirPods Pro</li>
                    <li>¿Qué laptops gaming ofrecen?</li>
                    <li>Necesito un nuevo televisor 4K</li>
                </ul>
                <p class="mt-2 mb-0"><strong>Nota:</strong> El Proto-Chatbot mostrará la intención detectada y los productos mencionados, pero no proporcionará información específica sobre disponibilidad, precios o características.</p>
            </div>

            <!-- Conversation area -->
            <div class="conversation-area mb-4" style="height: 400px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; background-color: #f8f9fa;">
                <div *ngFor="let message of conversation" class="mb-3">
                    <div *ngIf="message.startsWith('Usuario:')" class="text-end">
                        <span class="bg-primary text-white py-2 px-3 rounded-pill d-inline-block">
                            {{ message }}
                        </span>
                    </div>
                    <div *ngIf="message.startsWith('Proto-Chatbot:')" class="chatbot-response">
                        <div class="bg-light border rounded p-3">
                            <strong class="d-block mb-2">Análisis del Proto-Chatbot:</strong>
                            <pre style="white-space: pre-wrap; font-family: inherit; margin-bottom: 0;">{{ message.substring(14) }}</pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input area -->
            <div class="input-group mb-3">
                <input type="text" class="form-control" [(ngModel)]="userInput" placeholder="Escribe tu consulta aquí..."
                    (keyup.enter)="sendMessage()" [disabled]="loading">
                <button class="btn btn-primary" type="button" (click)="sendMessage()" [disabled]="loading">
                    <i class="bi bi-send"></i> Enviar
                </button>
            </div>

            <!-- Loading indicator -->
            <div *ngIf="loading" class="text-center">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Analizando...</span>
                </div>
            </div>
        </div>
    </div>
</section>